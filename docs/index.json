[{"authors":null,"categories":null,"content":"This feature can be used for publishing content such as:\n1\u0026frasl;5\n Project or software documentation Online courses Tutorials  The parent folder may be renamed, for example, to docs for project documentation or course for creating an online course.\nTo disable this feature, either delete the parent folder, or set draft = true in the front matter of all its pages.\nAfter renaming or deleting the parent folder, you may wish to update any [[menu.main]] menu links to it in the config.toml.\n","date":1536444000,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1544729880,"objectID":"82838cdca3b9d984e69fad40be3f8623","permalink":"https://lubin.kerhuel.eu/tutorial/subtutorial2/","publishdate":"2018-09-09T00:00:00+02:00","relpermalink":"/tutorial/subtutorial2/","section":"tutorial","summary":"This feature can be used for publishing content such as:\n1\u0026frasl;5\n Project or software documentation Online courses Tutorials  The parent folder may be renamed, for example, to docs for project documentation or course for creating an online course.\nTo disable this feature, either delete the parent folder, or set draft = true in the front matter of all its pages.\nAfter renaming or deleting the parent folder, you may wish to update any [[menu.","tags":null,"title":"Overview11","type":"docs"},{"authors":null,"categories":null,"content":"This feature can be used for publishing content such as:\n Project or software documentation Online courses Tutorials  The parent folder may be renamed, for example, to docs for project documentation or course for creating an online course.\nTo disable this feature, either delete the parent folder, or set draft = true in the front matter of all its pages.\nAfter renaming or deleting the parent folder, you may wish to update any [[menu.main]] menu links to it in the config.toml.\n","date":1536444000,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1544729880,"objectID":"061e2a233da05999c57110b8c9a1b6ac","permalink":"https://lubin.kerhuel.eu/tutorial/subtutorial/","publishdate":"2018-09-09T00:00:00+02:00","relpermalink":"/tutorial/subtutorial/","section":"tutorial","summary":"This feature can be used for publishing content such as:\n Project or software documentation Online courses Tutorials  The parent folder may be renamed, for example, to docs for project documentation or course for creating an online course.\nTo disable this feature, either delete the parent folder, or set draft = true in the front matter of all its pages.\nAfter renaming or deleting the parent folder, you may wish to update any [[menu.","tags":null,"title":"Overview11","type":"docs"},{"authors":null,"categories":null,"content":" Control a 24V DC motor using the MCLV V2 board with a dsPIC 33EP256MC506. This hands-on is for 5th year students at INSA-Lyon.\nThe hands-on Lab subject available at: https://rtdc.ctrl-elec.fr/.\nSlides presents the adaptation required to go from a Simulink model for Simulation (or DSPACE) to a Simulink model targeting a microcontrollers. Two topics are presented:\n Real-time scheduler / CPU load analysis Fixed-point datatypes  Authors:  Romain DELPOUX (Romain.Delpoux at insa-lyon.fr), Assistant Professor, INSA de Lyon, Laboratoire Ampère UMR CNRS 5005. Lubin KERHUEL (Lubin.Kerhuel at microchip.com), Dr-Engineer, Microchip Technology Inc.  ","date":1543618800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1545046812,"objectID":"302c3fd4ee8916cc61aece44dff60b9e","permalink":"https://lubin.kerhuel.eu/project/lab_dc_motor/","publishdate":"2018-12-01T00:00:00+01:00","relpermalink":"/project/lab_dc_motor/","section":"project","summary":"Simulation \u0026 real-time control of a 24v DC motor (INSA Lyon hands-on)","tags":["simulink","matlab","motor-control","rapid-prototyping","DC-motor","speed-controller"],"title":"Real Time Control for a DC Motor","type":"project"},{"authors":null,"categories":null,"content":" #include \u0026ldquo;includeme.md\u0026rdquo;\nIn this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nmain title Simulink Simulink, Mavlink keywords. Matlab,\n2nd bullet $$ \\frac{\\pi}{2} = 5 $$\nTip 1 Matlab code 1 + 2 . 0 5 6 8 4 8 sin(2)  \u0026hellip;\nTip 2 \u0026hellip;\nsecond main title piou piou\n","date":1536444000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1544729880,"objectID":"6ef0d9bcbe3d85e4da3dcd36b4e188bf","permalink":"https://lubin.kerhuel.eu/tutorial/subtutorial/example/","publishdate":"2018-09-09T00:00:00+02:00","relpermalink":"/tutorial/subtutorial/example/","section":"tutorial","summary":"#include \u0026ldquo;includeme.md\u0026rdquo;\nIn this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nmain title Simulink Simulink, Mavlink keywords. Matlab,\n2nd bullet $$ \\frac{\\pi}{2} = 5 $$\nTip 1 Matlab code 1 + 2 . 0 5 6 8 4 8 sin(2)  \u0026hellip;\nTip 2 \u0026hellip;\nsecond main title piou piou","tags":null,"title":"Example Page11","type":"docs"},{"authors":null,"categories":null,"content":" je suis un titre $\\frac{1}{pi}$\nmavlink\n","date":1536444000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1544729880,"objectID":"d85f4f79b587053cdadb6aed023fc71b","permalink":"https://lubin.kerhuel.eu/tutorial/subtutorial/example3/","publishdate":"2018-09-09T00:00:00+02:00","relpermalink":"/tutorial/subtutorial/example3/","section":"tutorial","summary":"je suis un titre $\\frac{1}{pi}$\nmavlink","tags":null,"title":"Example Page 13","type":"docs"},{"authors":null,"categories":null,"content":" Simulink model to target a dsPIC MCLV board running a DC motor The model contains blocks to configure dsPIC peripheral (PWM, ADC and QEI) to run a DC motor with the MCLV-V2 board equipped with the dsPIC-33EP256MC506 PIM using internal Op-Amps. Sensors measurements are visualized on the computer while the motor is running.\nGetting Started The model MCLV2_dsPIC33EP256MC506_externalOpAmp_HardwareTest.mdl is for code generation (peripheral blocks have no effects during a simulation). Open the Simulink model and push the build button on the top right, below the Simulink windows menu bar.\n *fig: Model MCLV2_dsPIC33EP256MC506_externalOpAmp_HardwareTest.mdl set-up the dsPIC 33EP256MC506 peripherals with internal op-amps for the MCLV-v2 board. Two PWM signals updated at 20kHz drives a DC motor through a H mosfet structure. One QEI peripheral sampled at 500Hz provides shaft position and speed from an optical encoder. Two ADC channels provides respectively the board potentiometer position and the current measurement from a shunt resistor. These four measurements are under-sampled at 100Hz and sent through the 115200 UART connection to the computer and decoded with the picgui graphical interface.*\nHardware requirements:  MCLV-V2 Motor Control Board PIM dsPIC33EP256MC506 with internal Op-Amp Programmer (PICkit 4, ICD4, Real-Ice, PICkit 3, ICD3, \u0026hellip;) DC motor (Pravalux Brushed DC Motor, 90 W, 24 V dc, 3000 rpm) Cable to send data from the MCLV board (Tx) to the PC (Rx) (like a FTDI cable)  Software requirements:  Matlab/Simulink  Embedded coder (Matlab Coder \u0026amp; Simulink Coder) Fixed point toolbox  MPLAB device blocks for Simulink MPLAB X IDE development (required to flash the binary from matlab) XC16 compiler  Experiment Generate code and compile: The build icon on top right of Simulink model, (see fig above) do: 1. generates c source code, 2. compiles c code and 3. flash the resulting binary to the MCLV targeted board.\n If programming the board fails (not powered, not connected,\u0026hellip;), use the Microchip -\u0026gt; Flash within the Simulink model menu.\n Run the DC motor: With the MCLV2 board powered and programmed, rotate the potentiometer to accelerate motor / reverse direction. Setting the potentiometer at middle position (off) at power on to avoid current surge.\nData Visualization with picgui: Open the picgui interface (fig) (type picgui at matlab prompt or double click on the Interface Tx-Matlab block in the model) 1. Select host UART port and connect at 115200 bauds 1. Replace the default script within the picgui interface to a call the customized matlab script DataVisu.m 1. Push the start button to visualize runtime curves showing potentiometer, motor position, motor speed and current measured on shunt resistors\n fig: The picgui interface decode the incoming UART data stream and plot in real-time received values, here potentiometer, motor speed and current measured. Plots in figure are realized with a matlab script which is continuously refreshing the graphs using incoming data. This script can be modified providing all the matlab capabilities to customize visualization or perform further analysis on received data in real-time.\nBack to project presentation\n","date":1536444000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1544729880,"objectID":"77b379e520306c567527b7924ce2c428","permalink":"https://lubin.kerhuel.eu/tutorial/subtutorial/hardware_setup/","publishdate":"2018-09-09T00:00:00+02:00","relpermalink":"/tutorial/subtutorial/hardware_setup/","section":"tutorial","summary":"Simulink model to target a dsPIC MCLV board running a DC motor The model contains blocks to configure dsPIC peripheral (PWM, ADC and QEI) to run a DC motor with the MCLV-V2 board equipped with the dsPIC-33EP256MC506 PIM using internal Op-Amps. Sensors measurements are visualized on the computer while the motor is running.\nGetting Started The model MCLV2_dsPIC33EP256MC506_externalOpAmp_HardwareTest.mdl is for code generation (peripheral blocks have no effects during a simulation).","tags":null,"title":"Example Page1111","type":"docs"},{"authors":null,"categories":null,"content":" Simulink model to target a dsPIC MCLV board running a DC motor The model contains blocks to configure dsPIC peripheral (PWM, ADC and QEI) to run a DC motor with the MCLV-V2 board equipped with the dsPIC-33EP256MC506 PIM using internal Op-Amps. Sensors measurements are visualized on the computer while the motor is running.\nGetting Started The model MCLV2_dsPIC33EP256MC506_externalOpAmp_HardwareTest.mdl is for code generation (peripheral blocks have no effects during a simulation). Open the Simulink model and push the build button on the top right, below the Simulink windows menu bar.\n *fig: Model MCLV2_dsPIC33EP256MC506_externalOpAmp_HardwareTest.mdl set-up the dsPIC 33EP256MC506 peripherals with internal op-amps for the MCLV-v2 board. Two PWM signals updated at 20kHz drives a DC motor through a H mosfet structure. One QEI peripheral sampled at 500Hz provides shaft position and speed from an optical encoder. Two ADC channels provides respectively the board potentiometer position and the current measurement from a shunt resistor. These four measurements are under-sampled at 100Hz and sent through the 115200 UART connection to the computer and decoded with the picgui graphical interface.*\nHardware requirements:  MCLV-V2 Motor Control Board PIM dsPIC33EP256MC506 with internal Op-Amp Programmer (PICkit 4, ICD4, Real-Ice, PICkit 3, ICD3, \u0026hellip;) DC motor (Pravalux Brushed DC Motor, 90 W, 24 V dc, 3000 rpm) Cable to send data from the MCLV board (Tx) to the PC (Rx) (like a FTDI cable)  Software requirements:  Matlab/Simulink  Embedded coder (Matlab Coder \u0026amp; Simulink Coder) Fixed point toolbox  MPLAB device blocks for Simulink MPLAB X IDE development (required to flash the binary from matlab) XC16 compiler  Experiment Generate code and compile: The build icon on top right of Simulink model, (see fig above) do: 1. generates c source code, 2. compiles c code and 3. flash the resulting binary to the MCLV targeted board.\n If programming the board fails (not powered, not connected,\u0026hellip;), use the Microchip -\u0026gt; Flash within the Simulink model menu.\n Run the DC motor: With the MCLV2 board powered and programmed, rotate the potentiometer to accelerate motor / reverse direction. Setting the potentiometer at middle position (off) at power on to avoid current surge.\nData Visualization with picgui: Open the picgui interface (fig) (type picgui at matlab prompt or double click on the Interface Tx-Matlab block in the model) 1. Select host UART port and connect at 115200 bauds 1. Replace the default script within the picgui interface to a call the customized matlab script DataVisu.m 1. Push the start button to visualize runtime curves showing potentiometer, motor position, motor speed and current measured on shunt resistors\n fig: The picgui interface decode the incoming UART data stream and plot in real-time received values, here potentiometer, motor speed and current measured. Plots in figure are realized with a matlab script which is continuously refreshing the graphs using incoming data. This script can be modified providing all the matlab capabilities to customize visualization or perform further analysis on received data in real-time.\nBack to project presentation\n","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1544729880,"objectID":"22df4e171e4c05300fe92452fdcd8b0c","permalink":"https://lubin.kerhuel.eu/tutorial/subtutorial2/hardware_setup/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/tutorial/subtutorial2/hardware_setup/","section":"tutorial","summary":"Simulink model to target a dsPIC MCLV board running a DC motor The model contains blocks to configure dsPIC peripheral (PWM, ADC and QEI) to run a DC motor with the MCLV-V2 board equipped with the dsPIC-33EP256MC506 PIM using internal Op-Amps. Sensors measurements are visualized on the computer while the motor is running.\nGetting Started The model MCLV2_dsPIC33EP256MC506_externalOpAmp_HardwareTest.mdl is for code generation (peripheral blocks have no effects during a simulation).","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":" Prototypage rapide avec Simulink sur dsPIC MPLAB device blocks for Simulink\nL.Kerhuel \u0026amp; R.Delpoux\n Pendule inverse  Video\nPlan: Modèle de simulation \u0026amp; génération de code\n Différences Temporel optimisation et type de données blocks et fonctionnalités Simulink  DSPACE  Aspect Temporel: Simulation Modélisation en temps continue, transformé de Laplace dans le domaine p (ou s)\n Solver résout les équations différentielles Pas de contrainte temps réelle Résultat dépend du solveur ; pas de calcul variable.  Aspect Temporel: Implémentation Implémentation en temps discret avec un pas de calcul fixe\n pas de solveur Contrainte temps réel Single-Rate \u0026amp; Multi-Rate Single-Tasking \u0026amp; Multi-Tasking   Discrete times  Single-rate:\n Les blocks ont tous la même période d\u0026rsquo;exécution (Même couleur)  Multi-Rate\n Les blocks peuvent avoir des périodes d\u0026rsquo;exécution différentes (Schéma multicolore)    Modèle multi-rate Charge CPU d\u0026rsquo;un modèle multi-rate single-tasking (@70 mips)  Charge CPU d\u0026rsquo;un modèle multi-rate single-tasking (@20 mips)  Single-Tasking Single-Tasking: Dans le slot de temps, l\u0026rsquo;exécution de tous les blocks doit se terminer avant la fin du slot.\nMulti-Tasking Multi-Tasking: Préemption possible -\u0026gt; Monotonic Rate Scheduler\n La tâche la plus fréquente à la priorité maximale  Préemptera une tache plus lente Beaucoup plus flexible Mode par défaut (voir options du solveur)   Charge CPU d\u0026rsquo;un modèle multi-rate single-tasking (@70 mips)  Charge CPU d\u0026rsquo;un modèle multi-rate single-tasking (@20 mips)  Tasking Conclusion  Single-Tasking @ 20 MIPS -\u0026gt; Overload  dispatcher la tache la plus lente sur plusieurs slots (option d\u0026rsquo;offset dans Time Step -\u0026gt; [.001 .005])  Multi-Tasking @ 20 MIPS -\u0026gt; Ok  Rate transfert block options  Data Integrity Deterministic data transfert    Optimisation type de données  Virgule Fixe Virgule Flottante  Flotant    IEEE 754 Single Double     Format width 32 64   Sign bit 1 1   exponent width 8 11   Precision width 23+1 52+1    1st bit of the significand is always 1. Phantom bit\nCustom 8 bit Floating point    Parameter Single Double Custom     Format width 32 64 8   Sign bit 1 1 1   exponent width 8 11 4   Precision width 23+1 52+1 3+1    Script Matlab pour tester un flottant 8 bits % 4 bit exponent (signed) emin = -7; emax = 6; % 3 bits significand p = 3; exps = 2.^[emin:emax]; vals = (2^p) + [0:(2^p-1)]; % significand with leading 1 TotalVal = vals'*exps; % add denormalized values 8bitFloat = unique([TotalVal ; 2^emin * [0:(2^m-1)]']); 8bitFloat = unique(flipud(-TotalVal) ;TotalVal]); % with neg vals  Simulink Data-type Datatype  int8\u0026hellip;uint23 fixdt(1,16,15)  Scaling is En15 (Exp neg) $$\\rightarrow 2^-15$$  fixdt(1,16)  signed (1) 16 bit width Scaling is derived from min \u0026amp; max   Datatype  fixdt(1,16,.01,0)  Scaling is sfix16Sp01 Slope point 01\n   TP https://www.ctrl-elec.fr https://lubin.kerhuel.eu/slides/slides_dcmotor_insa\nElements de correction PWM settings Liens:  MPLAB device blocks for Simulink: https://www.microchip.com/SimulinkBlocks MPLAB X: https://www.microchip.com/MPLABX XC16: https://www.microchip.com/XC16  ","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1545129310,"objectID":"83bc3cca581b3f378a5da39cbcb82629","permalink":"https://lubin.kerhuel.eu/slides/slides_dcmotor_insa/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/slides/slides_dcmotor_insa/","section":"slides","summary":"Prototypage rapide avec Simulink sur dsPIC MPLAB device blocks for Simulink\nL.Kerhuel \u0026amp; R.Delpoux\n Pendule inverse  Video\nPlan: Modèle de simulation \u0026amp; génération de code\n Différences Temporel optimisation et type de données blocks et fonctionnalités Simulink  DSPACE  Aspect Temporel: Simulation Modélisation en temps continue, transformé de Laplace dans le domaine p (ou s)\n Solver résout les équations différentielles Pas de contrainte temps réelle Résultat dépend du solveur ; pas de calcul variable.","tags":null,"title":"Prototypage Rapide avec Simulink sur dsPIC","type":"slides"},{"authors":null,"categories":null,"content":" Test slides  My Title !   mes notes\nControls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E  Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)  Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = \\;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\nFragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}}  Press Space to play!\nOne  Two  Three \nA fragment can accept two optional parameters:\n class: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears  Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}}  Press the S key to view the speaker notes!\n Only the speaker can read these notes Press S key to view   Themes  black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links   night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links  Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026quot;/img/boards.jpg\u0026quot; \u0026gt;}} {{\u0026lt; slide background-color=\u0026quot;#0000FF\u0026quot; \u0026gt;}} {{\u0026lt; slide class=\u0026quot;my-style\u0026quot; \u0026gt;}}  Custom CSS Example Let\u0026rsquo;s make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; }  Questions? Ask\nDocumentation\n","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1545129310,"objectID":"50f0f0b19655c117e1061c224f14cef8","permalink":"https://lubin.kerhuel.eu/slides/testslides/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/slides/testslides/","section":"slides","summary":"Test slides  My Title !   mes notes\nControls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E  Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)  Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = \\;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$","tags":null,"title":"test slides","type":"slides"}]